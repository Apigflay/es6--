<html>
<meta charset="utf-8">

<head>
  <title>WebRTC测试</title>
</head>

<body>
 
  <div onclick='jiami()'>加密</div>


  <script language="JavaScript">
      var strtest ='{name:1}';
      var num = 11010;
       
      
      //ArrayBuffer转字符串
      function ab2str(u,f) {
         var b = new Blob([u]);
         var r = new FileReader();
          r.readAsText(b, 'utf-8');
          r.onload = function (){if(f)f.call(null,r.result)}
      }
      //字符串转字符串ArrayBuffer
      function str2ab(s,f) {
          var b = new Blob([s],{type:'text/plain'});
          var r = new FileReader();
          r.readAsArrayBuffer(b);
          r.onload = function (){if(f)f.call(null,r.result)}
      }

      // ab2str(arrayBuffer,function(str){
      //         //str为字符串
      // });
      // str2ab(str,function(ab){
      //   //ab为ArrayBuffer
      // })
      function jiami(str,num){
          str2ab('{name:1112}',function(str){
      //         //str为字符串
              console.log(str)
                    ab2str(str,function(strbuff){
                    //         //strbuff
                            console.log(strbuff)
                    });
          })
      }


        

        
  </script>
</body>

</html>